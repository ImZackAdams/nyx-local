<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NyxPay Checkout ‚Äì shirt</title>
  <style>
    body { font-family: sans-serif; background: #0a0a0a; color: #f5f5f5; padding: 2rem; text-align: center; }
    .container { max-width: 520px; margin: 0 auto; background: #161616; padding: 30px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.4); }
    .btn { background: #FEB02E; color: #000; padding: 10px 16px; font-weight: 700; border-radius: 8px; display: inline-block; margin-top: 1rem; border: 0; cursor: pointer; text-decoration: none; }
    .status { margin-top: 1rem; font-size: 0.95rem; opacity: 0.9; }
    code { font-size: 0.9rem; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üåë NyxPay Checkout</h1>
    <p><strong>shirt</strong></p>
    <p>Amount: <strong>1 SOL</strong></p>
    <p>To: <code>2CXQLdk681zBN4cxitYo8AGAfPrhamvVJtp7Sj7TYnpv</code></p>
    <button id="connectWallet" class="btn">Connect Wallet</button>
    <button id="payButton" class="btn" disabled>Pay Now</button>
    <div class="status" id="statusMessage">Waiting...</div>
  </div>

  <script src="https://unpkg.com/@solana/web3.js@1.95.3/lib/index.iife.js"></script>
  <script src="https://unpkg.com/nyxpay-pay-sdk@0.1.0/dist/nyxpay-pay-sdk.umd.js"></script>
  <script>
    (function(){
      var RECIPIENT = "2CXQLdk681zBN4cxitYo8AGAfPrhamvVJtp7Sj7TYnpv";
      var AMOUNT = 1;
      var TOKEN = "SOL";
      var LABEL = "shirt";
      var payBtn = document.getElementById('payButton');
      var connectBtn = document.getElementById('connectWallet');
      var status = document.getElementById('statusMessage');
      var SDK = window.nyxpayPaySDK || window.NyxPaySDK || window.nyxpay || null;
      if (!SDK) { status.textContent = 'SDK failed to load. Check your internet connection.'; throw new Error('NyxPay SDK global not found'); }
      var PaymentProcessor = SDK.PaymentProcessor;
      var PhantomAdapter = SDK.PhantomAdapter;
      var sdk = new PaymentProcessor({ network: 'mainnet-beta', commitment: 'confirmed' });
      sdk.setWalletAdapter(new PhantomAdapter());
      (async function(){ try { await sdk.init(); } catch(e) { status.textContent = 'Init failed: ' + (e && e.message ? e.message : e); } })();
      connectBtn.addEventListener('click', async function(){
        try { await sdk.connectWallet(); payBtn.disabled = false; status.textContent = 'Wallet connected. Ready to pay.'; }
        catch(err) { status.textContent = 'Failed to connect wallet: ' + (err && err.message ? err.message : err); }
      });
      payBtn.addEventListener('click', async function(){
        status.textContent = 'Sending payment...';
        try {
          var opts = { recipient: RECIPIENT, amount: AMOUNT, tokenMint: TOKEN, memo: LABEL };
          var result = await sdk.sendTokens(opts);
          var url = (result && result.explorerUrl) ? result.explorerUrl : '#';
          status.innerHTML = '‚úÖ Payment sent!<br><a href="' + url + '" target="_blank" rel="noopener">View on Explorer</a>';
          payBtn.disabled = true;
        } catch (err) {
          status.textContent = '‚ùå Payment failed: ' + (err && err.message ? err.message : err);
        }
      });
    })();
  </script>
</body>
</html>
