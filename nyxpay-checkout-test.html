<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NyxPay Checkout ‚Äì test</title>
  <style>
    body { font-family: sans-serif; background: #0a0a0a; color: #f5f5f5; padding: 2rem; text-align: center; }
    .container { max-width: 520px; margin: 0 auto; background: #161616; padding: 30px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.4); }
    .btn { background: #FEB02E; color: #000; padding: 10px 16px; font-weight: 700; border-radius: 8px; display: inline-block; margin-top: 1rem; border: 0; cursor: pointer; text-decoration: none; }
    .status { margin-top: 1rem; font-size: 0.95rem; opacity: 0.9; }
    code { font-size: 0.9rem; word-break: break-all; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üåë NyxPay Checkout</h1>
    <p><strong>test</strong></p>
    <p>Amount: <strong>1 SOL</strong></p>
    <p>To: <code>2CXQLdk681zBN4cxitYo8AGAfPrhamvVJtp7Sj7TYnpv</code></p>
    <button id="connectWallet" class="btn">Connect Wallet</button>
    <button id="payButton" class="btn" disabled>Pay Now</button>
    <div class="status" id="statusMessage">Loading...</div>
  </div>

  <script>

/*! Paste the FULL contents of bn.js UMD/min build here so it defines window.BN */

</script>
  <script>

/*! Paste the FULL contents of @solana/web3.js IIFE build here so it defines window.solanaWeb3 */

</script>
  <script>

/*! Paste the FULL contents of sdk/dist/nyxpay-pay-sdk.umd.js here */

</script>
  <script>
    (function(){
      var RECIPIENT = "2CXQLdk681zBN4cxitYo8AGAfPrhamvVJtp7Sj7TYnpv";
      var AMOUNT = 1;
      var TOKEN = "SOL";
      var LABEL = "test";
      var payBtn = document.getElementById('payButton');
      var connectBtn = document.getElementById('connectWallet');
      var status = document.getElementById('statusMessage');
      if (!window.BN) { status.textContent = 'BN missing'; throw new Error('BN global not found'); }
      if (!window.solanaWeb3) { status.textContent = 'solanaWeb3 missing'; throw new Error('solanaWeb3 global not found'); }
      var SDK = window.nyxpayPaySDK || window.NyxPaySDK || window.nyxpay || window.NyxPay || null;
      if (!SDK) { status.textContent = 'SDK missing'; throw new Error('NyxPay SDK global not found'); }
      var PaymentProcessor = SDK.PaymentProcessor;
      var PhantomAdapter = SDK.PhantomAdapter;
      var sdk = new PaymentProcessor({ network: 'mainnet-beta', commitment: 'confirmed' });
      sdk.setWalletAdapter(new PhantomAdapter());
      (async function(){ try { await sdk.init(); status.textContent = 'Ready. Connect your wallet.'; } catch(e) { status.textContent = 'Init failed: ' + (e && e.message ? e.message : e); } })();
      connectBtn.addEventListener('click', async function(){
        try { await sdk.connectWallet(); payBtn.disabled = false; status.textContent = 'Wallet connected. Ready to pay.'; }
        catch(err) { status.textContent = 'Failed to connect wallet: ' + (err && err.message ? err.message : err); }
      });
      payBtn.addEventListener('click', async function(){
        if (payBtn.disabled) return;
        payBtn.disabled = true;
        status.textContent = 'Sending payment...';
        try {
          var opts = { recipient: RECIPIENT, amount: AMOUNT, tokenMint: TOKEN, memo: LABEL };
          var result = await sdk.sendTokens(opts);
          var url = (result && result.explorerUrl) ? result.explorerUrl : '#';
          status.textContent = '‚úÖ Payment sent!';
          var br = document.createElement('br');
          var a  = document.createElement('a'); a.href = url; a.target = '_blank'; a.rel = 'noopener'; a.textContent = 'View on Explorer';
          status.appendChild(br); status.appendChild(a);
        } catch (err) {
          status.textContent = '‚ùå Payment failed: ' + (err && err.message ? err.message : err);
          payBtn.disabled = false;
        }
      });
    })();
  </script>
</body>
</html>
